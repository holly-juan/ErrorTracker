!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e=r();for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(this,function(){return function(t){function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){t.exports=e(1)},function(t,r,e){var n=e(2),o=e(5),i=e(7),s=e(9),a=e(10),c=e(6),u=e(12),f=e(8),h=e(4),p=h.create({constructor:function(t){if(!t)throw new Error("缺少初始化参数");if(!t.requester)throw new Error("缺少异常记录请求的参数:[requester->{type:'',url:''}]");this.requester=new n(t.requester),this.monitor=new o({requester:this.requester}),this.resourceListener=(new s).init(),this.exceptionListener=(new a).init(),this.catcher=new u,this.init()},use:function(){this.monitor.apply(this.monitor,arguments)},wrap:function(){this.catcher.wrap.apply(this.catcher,arguments)}});t.exports={ErrorTracker:p,ErrorTracker_BaseClasses:{BaseListener:i,ErrorFormat:c,Catcher:u,ResourceListener:s,ExceptionListener:a,Monitor:o,Requester:n,constants:f}}},function(t,r,e){var n=e(3),o=e(4),i=o.create(n,{type:"GET",url:"#",constructor:function(){this.options.type&&(this.type=this.options.type),this.options.url&&(this.url=this.options.url)},send:function(t){var r=[];for(var e in t){var n=t[e];"string"!=typeof n&&(n=JSON.stringify(n)),r.push(e+"="+encodeURIComponent(n))}r.push("_="+Math.random());var o=this.url+"?"+r.join("&");o=(window.location.protocol||"").match(/https/)?"https:"+o:"http:"+o,(new Image).src=o}});t.exports=i},function(t,r,e){var n=e(4),o=n.create({constructor:function(t){this.options=t||{},this.singer=this.options.singer||"anonymous"+(new Date).getTime()},tester:function(){console.log("name:["+this.singer+"]: Has no tester")},rewrite:function(t,r){if(!this[t])throw new Error("Have no ["+t+"] function");this[t]=r}});t.exports=o},function(t,r){t.exports={create:function(){var t=Array.prototype.slice.call(arguments);if(1===t.length)return this.object.apply(this,t);if(2===t.length)return this.extend.apply(this,t);throw new Error("Function's('Object.create()') arguments aren't expected.")},extend:function(t,r){var e=function(){};e.prototype=t.prototype;var n=function(){t.apply(this,arguments),r.constructor&&r.constructor.apply(this,arguments)};n.prototype=new e;for(var o in r)r.hasOwnProperty(o)&&(n.prototype[o]=r[o]);return n},object:function(t){var r=function(){t.constructor&&t.constructor.apply(this,arguments)};r.prototype={};for(var e in t)t.hasOwnProperty(e)&&(r.prototype[e]=t[e]);return r}}},function(t,r,e){var n=e(3),o=e(6),i=e(4),s=i.create(n,{constructor:function(t){this.requester=t.requester},use:function(t){this.middleware=function(r){return function(e,n,o){r(e,function(){t(e,function(){n&&n(e)},o)},o)}}(this.middleware)},middleware:function(t,r,e){r(t)},record:function(t,r,e){var n=this;r=r||function(){};var o=t?this.getErrorFields(t):{};this.middleware(o,function(t){r(t),n.requester.send(t)},e)},getErrorFields:function(t){var t=(new o).format(t);return{message:t.message,stack:t.stack,frames:t.frames}}});t.exports=s},function(t,r,e){var n=e(4),o=n.create({crossBrowserStackExp:{spaceMark:[/\s+at\s+/g,/\n+/g],infoGroup:[/^([\S\s]+?)@((?:file\:){0,1}[\S]+?)\:([-]*\d+)\:([-]*\d+)$/,,/^([\S\s]+?)\s\(([\S]+?)\:([-]*\d+)\:([-]*\d+)\)$/,/^([\S\s]+?)@([\S]+?)\:([-]*\d+)\:([-]*\d*)$/,/^()(http[\S]+?)\:([-]*\d+)\:([-]*\d*)$/,/^()@([\S]+?)\:([-]*\d+)\:([-]*\d+)$/,/^([\S\s]+?)@([\S]+?)\:([-]*\d+)(?:\:)*([-]*\d*)$/]},getErrorStack:function(t){return t.stack||t.backtrace||t.stacktrace||""},getStackList:function(t){if(!t)return[];var r=this;t=t.replace(/^[\s]*|[\s]*$/,"");for(var e=r.crossBrowserStackExp,n=[],o=0;o<e.spaceMark.length;o++){var i=e.spaceMark[o];if(n=t.split(i),n&&n.length>1)return n}return n=[t]},createFrame:function(t){t=t||{};var r={fnName:t.fnName||"",fileName:t.fileName||"",lineNum:t.lineNum||"-1",colNum:t.colNum||"-1",ori:t.ori||""};return r},getStackInfo:function(t){for(var r=this,e=r.crossBrowserStackExp,n=null,o=0;o<e.infoGroup.length;o++){var i=e.infoGroup[o];if(n=t.match(i),n&&n.length>4)return r.createFrame({fnName:n[1]||"[anonymous]",fileName:n[2],lineNum:n[3],colNum:n[4],ori:t})}return null},format:function(t){for(var r=this,e=[],n=r.getErrorStack(t),o=r.getStackList(n),i=0;i<o.length;i++){var s=r.getStackInfo(o[i]);s&&e.push(s)}return e.length||e.push(this.createFrame()),{message:t.toString(),frames:e,stack:n}},toString:function(){for(var t=this,r="",e=[],n=0;n<t.frames.length;n++){var o=t.frames[n];o.hasFormated?e.push([o.fnName,"@","(",o.fileName,")",":",o.lineNum,":",o.colNum].join("")):e.push(o.ori)}return r+=e.join(";")}});t.exports=o},function(t,r,e){var n=e(3),o=e(4),i=e(8),s=o.create(n,{init:function(){var t=this,r=function(r){t.callback.apply(t,arguments)};return this.manner&&"set"===this.manner?window[this.event]=r:window.addEventListener?window.addEventListener(this.event,r,!0):window.attachEvent("on"+this.event,r),this},getMonitor:function(){return window[i.ETALIAS].monitor},record:function(){var t=this.getMonitor();t.record.apply(t,arguments)},getClearPath:function(t){return(t||window.location.href||"").replace(/\?[\S\s]+$/,"")}});t.exports=s},function(t,r){t.exports={CATCHER_SINGER:"CATCHER_SINGER",CATCHWRAPER:"catchWraper",ETALIAS:"ET",ONLOADFNNAME:"etOnload"}},function(t,r,e){var n=e(7),o=e(4),i=o.create(n,{event:"error",callback:function(t){if(!t.target||!t.target.tagName)return!1;var r=this,e=t.target.tagName.toLocaleLowerCase()||"",n="";switch(e){case"script":case"img":n=t.target.src;break;case"link":n=t.target.href}this.record(null,function(t){t.message=["Resource('"+e+"') not found: ",r.getClearPath(n)].join("")},{category:"resource"})}});t.exports=i},function(t,r,e){var n=e(7),o=e(11),i=(e(8),e(4)),s=i.create(n,{manner:"set",event:"onerror",callback:function(t,r,e,n,i){var s=this;return this.isScriptError(t)&&!r&&(!e||e<1)?(this.record(null,function(r){r.message=["Error on cross-domain script('",t,"') in ",s.getClearPath()].join("")},{category:"crossDomain"}),!1):(!n&&window.event&&(n=window.event.errorCharacter),i=i||new o({args:[t,r,e,n,i]}),void this.record(i,null,{category:"exception"}))},isScriptError:function(t){return!!t.match(/^script\serror[\.]?$/i)}});t.exports=s},function(t,r,e){var n=e(4),o=n.create({constructor:function(t){var r=t.args;this.message=r[0]||"unknown",this.file=r[1]||"unknown",this.line=r[2]||-1,this.column=r[3]||-1,this.stack=[this.message,"@",this.file,":",this.line,":",this.column].join("")},toString:function(){return this.message}});t.exports=o},function(t,r,e){var n=e(8),o=e(4),i=o.create({record:function(){var t=window[n.ETALIAS].monitor;t.record.apply(t,arguments)},wrap:function(t){if(!t||"function"!=typeof t)return t;if(t[n.CATCHWRAPER])return t[n.CATCHWRAPER];var r=this;return t[n.CATCHWRAPER]=function(){try{return t.apply(this,arguments)}catch(t){if(t.broken)throw t;throw t.broken=!0,t.message=n.CATCHER_SINGER+": "+t.message,r.record(t,null,{category:"catcher"}),t}},t[n.CATCHWRAPER][n.CATCHWRAPER]=t[n.CATCHWRAPER],t[n.CATCHWRAPER]}});t.exports=i}])});